---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "appdynamicscloud_connection_aws Resource - terraform-provider-appdynamicscloud"
subcategory: ""
description: |-
  
---

# appdynamicscloud_connection_aws (Resource)

- AWS connection for role delegation will be created with `access_type="role_delegation"` and `account_id`.
- AWS connection for access key will be created with `access_type="access_key"`, `access_key_id`, `secret_access_key`.
- To attach the `role_name` for role delegation user has to create resource `appdynamicscloud_connection_aws` for role delegation and resource `appdynamicscloud_connection_aws_role_attachment` with `role_name`.  
- Supported [Services](#table--services) are listed below.

~> **Note:** In case of Role Delegation AWS Connection the state will remain as `INCOMPLETE` until the role attachment is done. Once user attach role_name using resource `appdynamicscloud_connection_aws_role_attachment` the state will change to `CONFIGURED`. Once the state becomes `CONFIGURED`, user can change state to `ACTIVE` by terraform apply. If user does not attach role_name using resource `appdynamicscloud_connection_aws_role_attachment` the state will remain to `INCOMPLETE` and the resource will forces replace state.

## Example Usage

### Example for Role Delegation AWS Connection.
```terraform

resource "appdynamicscloud_connection_aws" "example1" {
  display_name = "AWS Dev"
  description  = "Description for this AWS connection"
  state        = "ACTIVE"

  connection_details {
    access_type = "role_delegation"
    account_id  = "xxxxxxxxxxxx"
  }

  configuration_details {
    import_tags {
      enabled       = true
      excluded_keys = ["key1", "key2"]
    }
    tag_filter = "(tags(env) = 'prod' || tags(env) = 'production')) && tags(project) = 'cloudcollectors'"
    regions    = ["us-east-1", "us-west-1"]
    polling {
      interval = 5
      unit     = "minute"
    }

    services {
      name = "ebs"
      import_tags {
        enabled       = false
        excluded_keys = []
      }
      tag_filter = "tags(project) = 'cloudcollectors' && tags(jira) IN ['XTNSBL','ACE'] && !(tags(region) IN ['US','IN']) && HAS tags(monitorEnabled) && !(HAS tags(restrictedUse)"
      polling {
        interval = 5
        unit     = "minute"
      }
    }
    services {
      name = "ec2"
      import_tags {
        enabled       = true
        excluded_keys = ["key1", "key2"]
      }
      polling {
        interval = 5
        unit     = "minute"
      }
      tag_filter = "tags(project) = 'cloudcollectors' && tags(jira) IN ['XTNSBL','ACE'] && !(tags(region) IN ['US','IN']) && HAS tags(monitorEnabled) && !(HAS tags(restrictedUse)"
    }
  }
}
```

### Example for Access Key AWS Connection.
```terraform

resource "appdynamicscloud_connection_aws" "example2" {
  display_name = "AWS Dev"
  description  = "Description for this AWS connection"
  state        = "ACTIVE"

  connection_details {
    access_type       = "access_key"
    access_key_id     = "xxxxxxxxxxxxxxxxxxx"
    secret_access_key = "xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"
  }

  configuration_details {
    import_tags {
      enabled       = true
      excluded_keys = ["key1", "key2"]
    }
    tag_filter = "(tags(env) = 'prod' || tags(env) = 'production')) && tags(project) = 'cloudcollectors'"
    regions    = ["us-east-1", "us-west-1"]
    polling {
      interval = 5
      unit     = "minute"
    }

    services {
      name = "ebs"
      import_tags {
        enabled       = false
        excluded_keys = []
      }
      tag_filter = "tags(project) = 'cloudcollectors' && tags(jira) IN ['XTNSBL','ACE'] && !(tags(region) IN ['US','IN']) && HAS tags(monitorEnabled) && !(HAS tags(restrictedUse)"
      polling {
        interval = 5
        unit     = "minute"
      }
    }
    services {
      name = "ec2"
      import_tags {
        enabled       = true
        excluded_keys = ["key1", "key2"]
      }
      polling {
        interval = 5
        unit     = "minute"
      }
      tag_filter = "tags(project) = 'cloudcollectors' && tags(jira) IN ['XTNSBL','ACE'] && !(tags(region) IN ['US','IN']) && HAS tags(monitorEnabled) && !(HAS tags(restrictedUse)"
    }
  }
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `connection_details` (Block List, Min: 1, Max: 1) (see [below for nested schema](#nestedblock--connection_details))
- `display_name` (String) Name of the connection or configuration

### Optional

- `configuration_details` (Block List, Max: 1) The Configuration Details for the Connection (see [below for nested schema](#nestedblock--configuration_details))
- `description` (String) Description for this connection or configuration
- `state` (String) Connection state. Value which can be given: [ "ACTIVE", "INACTIVE" ]. All possible values: [ "INACTIVE", "ACTIVE", "PENDING CONFIGURATION", "INCOMPLETE", "CONFIGURED", "INSUFFICIENT LICENSE", "ERROR", "WARNING", "CRITICAL" ]

### Read-Only

- `configuration_details_service_default` (Boolean) Whether default services are present in configuration details
- `configuration_id` (String) The Configuration ID of the Connection
- `created_at` (String) The RFC3339 timestamp
- `id` (String) The ID of this resource.
- `state_message` (String) Connection state message
- `updated_at` (String) The RFC3339 timestamp

<a id="nestedblock--connection_details"></a>
### Nested Schema for `connection_details`

Required:

- `access_type` (String) Connection type discriminator, supported types are `role_delegation` and `access_key`.

Optional:

- `access_key_id` (String) AWS Access keys are long-term credentials for an AWS IAM user, or account root user. The access key ID is one of two access keys needed to authenticate to AWS. The other is a secret access key. You need access keys to make programmatic calls using the AWS CLI, AWS Tools, or PowerShell.
- `account_id` (String) AWS Account ID provided by the user
- `secret_access_key` (String, Sensitive) The secret access key is one of two access keys needed to authenticate to AWS. The other is an access key ID. The secret access key is only available once, when you create it. Download the generated secret access key and save in a secure location. If the secret access key is lost or deleted, you must create a new one. You need access keys to make programmatic calls using the AWS CLI, AWS Tools, or PowerShell.

Read-Only:

- `appdynamics_aws_account_id` (String) AppDynamics AWS Account ID. Delegates a user to an Identity Access Management (IAM) role in AWS. The AWS IAM role provides AppDynamics access to resources.
						https://docs.aws.amazon.com/IAM/latest/UserGuide/id_roles_create_for-user_externalid.html
- `aws_account_id` (String) AWS Account ID fetched by the server
- `external_id` (String) Returns an external ID for AWS role delegation connections 
						https://docs.aws.amazon.com/IAM/latest/UserGuide/id_roles_create_for-user_externalid.html
- `role_name` (String) Role name for AWS iam role


<a id="nestedblock--configuration_details"></a>
### Nested Schema for `configuration_details`

Optional:

- `import_tags` (Block List, Max: 1) Configuration for importing tags of resources that are being monitored (see [below for nested schema](#nestedblock--configuration_details--import_tags))
- `polling` (Block List, Max: 1) How often the selected connection is polled for information (see [below for nested schema](#nestedblock--configuration_details--polling))
- `regions` (Set of String) Geographic locations used to fetch metrics
- `services` (Block Set) Services for which we will fetch metrics (see [below for nested schema](#nestedblock--configuration_details--services))
- `tag_filter` (String) Expression for filtering resources to be monitored, based on tags. Example: (tags(env) = 'prod' || tags(env) = 'production')) && tags(project) = 'cloudcollectors'

<a id="nestedblock--configuration_details--import_tags"></a>
### Nested Schema for `configuration_details.import_tags`

Optional:

- `enabled` (Boolean) It is true by default. Tags will be imported for all the resources that are being monitored by default
- `excluded_keys` (List of String) Array of tag keys that need to be excluded from being imported. It can be set only when enabled is true


<a id="nestedblock--configuration_details--polling"></a>
### Nested Schema for `configuration_details.polling`

Optional:

- `interval` (Number) The default polling interval is five (5) minutes
- `unit` (String) The unit of polling interval, currently only support 'minute'. Defaults to the same


<a id="nestedblock--configuration_details--services"></a>
### Nested Schema for `configuration_details.services`

Required:

- `name` (String) Service name for which we will fetch metrics

Optional:

- `import_tags` (Block List, Max: 1) Configuration for importing tags of resources that are being monitored (see [below for nested schema](#nestedblock--configuration_details--services--import_tags))
- `polling` (Block List, Max: 1) How often the selected connection is polled for information (see [below for nested schema](#nestedblock--configuration_details--services--polling))
- `tag_filter` (String) Expression for filtering resources to be monitored, based on tags. Example: (tags(env) = 'prod' || tags(env) = 'production')) && tags(project) = 'cloudcollectors'

<a id="nestedblock--configuration_details--services--import_tags"></a>
### Nested Schema for `configuration_details.services.import_tags`

Optional:

- `enabled` (Boolean) It is true by default. Tags will be imported for all the resources that are being monitored by default
- `excluded_keys` (List of String) Array of tag keys that need to be excluded from being imported. It can be set only when enabled is true


<a id="nestedblock--configuration_details--services--polling"></a>
### Nested Schema for `configuration_details.services.polling`

Optional:

- `interval` (Number) The default polling interval is five (5) minutes
- `unit` (String) The unit of polling interval, currently only support 'minute'. Defaults to the same

## Import

Import is supported using the following syntax:

```shell
terraform import appdynamicscloud_connection_aws.example <connection-id>
```


<a id="table--services"></a>
### AWS Services
| Display Name                      | ID  |
|-----------------------------------|-----|
| Elastic Cloud Compute             | ec2 |
| Elastic Load Balancing            | elb |
| Elastic Block Storage             | ebs |
| Amazon Relational Database Service| rds |
| Amazon Elastic Container Service  | ecs |
